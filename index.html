<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… S.L.M.A - Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --happy-neon: #00ffcc; --happy-pink: #ff00ff; --happy-yellow: #ffff00;
            --happy-blue: #0099ff; --success-glow: #00ff88; --error-glow: #ff4d4d;
            --info-glow: #00d4ff; --glass: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body { background: radial-gradient(circle at center, #1a1a4d 0%, #050112 100%); color: white; min-height: 100vh; overflow-x: hidden; }

        #toast { position: fixed; top: 25px; left: 50%; transform: translateX(-50%); padding: 15px 40px; border-radius: 50px; z-index: 10000; font-weight: 900; display: none; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,0.6); animation: bounceIn 0.5s ease; border: 2px solid white; }
        @keyframes bounceIn { 0% { transform: translateX(-50%) scale(0.3); opacity: 0; } 50% { transform: translateX(-50%) scale(1.05); } 100% { transform: translateX(-50%) scale(1); opacity: 1; } }

        .marquee-box { background: rgba(0,0,0,0.8); padding: 12px 0; border-bottom: 2px solid var(--happy-pink); overflow: hidden; }
        .marquee-text { display: inline-block; animation: colorfulScroll 15s linear infinite; font-weight: 900; font-size: 1.3rem; white-space: nowrap; }
        @keyframes colorfulScroll { 
            0% { transform: translateX(-100%); color: var(--happy-neon); }
            33% { color: var(--happy-yellow); }
            66% { color: var(--happy-pink); }
            100% { transform: translateX(100%); color: var(--happy-blue); }
        }

        .floating-logo { width: 130px; height: 130px; border-radius: 50%; border: 4px solid var(--happy-neon); animation: joyFloat 4s infinite ease-in-out; margin: 20px auto; display: block; box-shadow: 0 0 30px var(--happy-neon); }
        @keyframes joyFloat { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(10deg); box-shadow: 0 0 50px var(--happy-pink); } }

        nav { display: flex; justify-content: space-between; align-items: center; padding: 10px 4%; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px); border-bottom: 2px solid var(--happy-blue); position: sticky; top: 0; z-index: 1000; }
        .nav-links { display: flex; list-style: none; gap: 8px; align-items: center; }
        .nav-links li { cursor: pointer; padding: 8px 12px; border-radius: 15px; transition: 0.3s; font-weight: 700; font-size: 0.85rem; white-space: nowrap; border: 1px solid transparent; }
        .nav-links li:hover { background: var(--glass); color: var(--happy-yellow); border-color: var(--happy-yellow); transform: translateY(-2px); }

        .section { display: none; padding: 30px 4%; animation: zoomIn 0.5s ease; }
        .active { display: block; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        .card { background: var(--glass); padding: 25px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); margin-bottom: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        input, select, textarea { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.5); color: white; margin-top: 5px; font-size: 0.95rem; }
        label { color: var(--happy-neon); font-weight: bold; font-size: 0.85rem; }

        .btn { padding: 10px 18px; border: none; border-radius: 12px; cursor: pointer; font-weight: 900; transition: 0.3s; margin: 3px; display: inline-flex; align-items: center; justify-content: center; }
        .btn-main { background: linear-gradient(45deg, var(--happy-pink), var(--happy-blue)); color: white; width: 100%; margin-top: 20px; font-size: 1.1rem; }
        .btn-edit { background: var(--happy-yellow); color: #000; }
        .btn-del { background: var(--error-glow); color: white; }
        .btn-view { background: var(--happy-neon); color: #000; }
        .btn-search { background: var(--happy-blue); color: white; width: auto; min-width: 120px; }
        .btn-print-all { background: #fff; color: #000; border: 2px solid var(--happy-neon); margin-bottom: 15px; width: 100%; }

        .table-container { overflow-x: auto; background: rgba(0,0,0,0.2); border-radius: 20px; padding: 10px; border: 1px solid rgba(255,255,255,0.05); }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; text-align: center; }
        th { background: var(--happy-blue); padding: 15px; color: #000; font-weight: 900; }
        td { padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        
        .logo-preview-container { display: flex; gap: 10px; margin-top: 10px; }
        .logo-preview { width: 50px; height: 50px; object-fit: contain; border: 1px solid var(--happy-neon); border-radius: 5px; background: white; }

        .search-results-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10001; display: none; justify-content: center; align-items: center; padding: 20px; }
        .search-card { background: #1a1a4d; border: 2px solid var(--happy-neon); width: 100%; max-width: 600px; border-radius: 25px; padding: 25px; position: relative; max-height: 90vh; overflow-y: auto; }

        @media (max-width: 600px) { .nav-links li { padding: 6px 8px; font-size: 0.7rem; } .form-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div id="toast"></div>
    <div class="marquee-box"><div class="marquee-text">âœ¨ Ù†Ø¶Ø§Ù„ØŒ Ø­Ø±ÙŠØ©ØŒ Ø¹Ø¯Ø§Ù„Ø© âœ¨ Ø­Ø±ÙƒØ© Ø¬ÙŠØ´ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ù† âœ¨ ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù‚Ø¶Ø§Ø±Ù ØªØ±Ø­Ø¨ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ù…ØªØ·ÙˆØ± âœ¨ ÙƒÙ† Ø³Ø¹ÙŠØ¯Ø§Ù‹ ÙØ£Ù†Øª ÙÙŠ ÙˆØ·Ù†Ùƒ âœ¨</div></div>

    <nav>
        <div style="font-size: 22px; font-weight: 900; color: var(--happy-neon); text-shadow: 0 0 10px var(--happy-neon);">S.L.M.A</div>
        <ul class="nav-links">
            <li onclick="showSection('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</li>
            <li onclick="showSection('reg-page')">Ø§Ù„ØªØ³Ø¬ÙŠÙ„</li>
            <li onclick="showSection('news-public')">Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</li>
            <li onclick="showSection('login-page')">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</li>
        </ul>
    </nav>

    <div id="searchModal" class="search-results-overlay" onclick="closeSearch()">
        <div class="search-card" onclick="event.stopPropagation()">
            <button onclick="closeSearch()" style="float: left; background: red; color: white; border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer;">Ø¥ØºÙ„Ø§Ù‚ X</button>
            <h2 style="color: var(--happy-yellow); margin-bottom: 20px;">ğŸ” Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</h2>
            <div id="searchContent"></div>
        </div>
    </div>

    <section id="home" class="section active">
        <div class="card" style="text-align: center;">
            <h1 style="color: var(--happy-yellow); font-size: 2.8rem; text-shadow: 0 0 15px var(--happy-yellow);">Ø¬ÙŠØ´ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</h1>
            <img src="666.jpg" id="homeLogo" class="floating-logo" alt="Logo">
            <p style="font-size: 1.3rem; color: var(--happy-neon); margin-top: 20px;">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø£Ø±Ø´ÙŠÙ</p>
        </div>
    </section>

    <section id="reg-page" class="section">
        <div class="card">
            <h2 style="color: var(--happy-pink); text-align: center; margin-bottom: 25px;">ğŸ“ Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h2>
            <form id="mForm">
                <input type="hidden" id="editIdx" value="-1">
                <div class="form-grid">
                    <div><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ</label><input type="text" id="mName" required></div>
                    <div><label>Ø§Ù„Ø¬Ù†Ø³</label><select id="mGender"><option>Ø°ÙƒØ±</option><option>Ø£Ù†Ø«Ù‰</option></select></div>
                    <div><label>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙÙˆÙ†</label><input type="tel" id="mPhone" required></div>
                    <div><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label><input type="date" id="mBDate" required></div>
                    <div><label>Ø§Ù„Ø¹Ù…Ø±</label><input type="number" id="mAge" required></div>
                    <div><label>Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label><input type="text" id="mBPlace" required></div>
                    <div><label>Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</label><input type="text" id="mAddress" required></div>
                    <div><label>Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ…</label><select id="mEdu"><option>Ø£Ø³Ø§Ø³</option><option>Ø«Ø§Ù†ÙˆÙŠ</option><option>Ø¬Ø§Ù…Ø¹ÙŠ</option><option>Ø¯Ø±Ø§Ø³Ø§Øª Ø¹Ù„ÙŠØ§</option></select></div>
                    <div><label>Ø§Ù„ØªØ®ØµØµ</label><input type="text" id="mMajor" required></div>
                    <div><label>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„</label><input type="text" id="mJob" required></div>
                    <div><label>Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„</label><input type="text" id="mJobLoc" required></div>
                    <div><label>Ù†ÙˆØ¹ Ø§Ù„Ù‡ÙˆÙŠØ©</label><select id="mIdType"><option>Ø±Ù‚Ù… ÙˆØ·Ù†ÙŠ</option><option>Ø¬ÙˆØ§Ø² Ø³ÙØ±</option></select></div>
                    <div><label>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</label><input type="text" id="mIdNum" required></div>
                    <div><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</label><input type="date" id="mJoin" required></div>
                    <div><label>Ø§Ù„ØµÙØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©</label><input type="text" id="mRole" required></div>
                    <div><label>Ø§Ù†ØªÙ…Ø§Ø¡ Ø³ÙŠØ§Ø³ÙŠ Ø³Ø§Ø¨Ù‚ØŸ</label><select id="mPrev"><option>Ù„Ø§ ÙŠÙˆØ¬Ø¯</option><option>Ù†Ø¹Ù…</option></select></div>
                    <div><label>ØªØ¹Ù„Ù… Ø¨Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ø­Ø±ÙƒØ©ØŸ</label><select id="mKnow"><option>Ù†Ø¹Ù…</option><option>Ù„Ø§</option></select></div>
                </div>
                <div style="margin-top: 20px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px;">
                    <input type="checkbox" id="mAgree" required> <label style="color: white;">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ ÙƒØ§ÙØ© Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©.</label>
                </div>
                <button type="submit" class="btn btn-main">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„ âœ¨</button>
            </form>
        </div>
    </section>

    <section id="login-page" class="section">
        <div class="card" style="max-width: 400px; margin: auto; text-align: center;">
            <h2 style="color: var(--happy-neon); margin-bottom: 25px;">ğŸ” Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†</h2>
            <input type="text" id="admUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            <input type="password" id="admPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            <button onclick="login()" class="btn btn-main">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
        </div>
    </section>

    <section id="admin-panel" class="section">
        <div class="card" style="border: 2px solid var(--happy-blue);">
            <h3 style="color: var(--happy-blue);">ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¹Ù† Ø¹Ø¶Ùˆ</h3>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <input type="text" id="searchInput" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ Ù„Ù„Ø¨Ø­Ø«..." style="flex: 1;">
                <button onclick="searchMember()" class="btn btn-search">Ø¨Ø­Ø« Ø§Ù„Ø¢Ù†</button>
            </div>
        </div>

        <div class="card" style="border: 2px solid var(--happy-neon);">
            <h3 style="color: var(--happy-neon); text-align: center;">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</h3>
            <div class="form-grid">
                <div>
                    <label>Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠÙ…Ù†</label>
                    <input type="file" id="logoRightInput" accept="image/*" onchange="uploadLogo('right')">
                    <div class="logo-preview-container" id="previewRight"></div>
                </div>
                <div>
                    <label>Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠØ³Ø±</label>
                    <input type="file" id="logoLeftInput" accept="image/*" onchange="uploadLogo('left')">
                    <div class="logo-preview-container" id="previewLeft"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3 style="color:var(--happy-neon)">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</h3>
            <button class="btn btn-print-all" onclick="printAllMembers()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© ÙƒØ´Ù Ø­ØµØ± Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„ (Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†)</button>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù‡ÙˆÙŠØ©</th><th>Ø§Ù„ØµÙØ©</th><th>Ø§Ù„Ø³ÙƒÙ†</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead><tbody id="mBody"></tbody></table></div>
        </div>

        <div class="form-grid">
            <div class="card">
                <h3>ğŸ“¢ Ø±ÙØ¹ Ø®Ø¨Ø± Ø£Ùˆ Ù†Ø´Ø§Ø·</h3>
                <input type="hidden" id="newsIdx" value="-1">
                <input type="text" id="nTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±">
                <textarea id="nContent" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¨Ø±..." rows="3"></textarea>
                <input type="file" id="nImg" accept="image/*">
                <button onclick="saveNews()" id="newsBtn" class="btn btn-main" style="background:var(--happy-yellow); color:#000;">Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ø¢Ù† ğŸš€</button>
            </div>
            <div class="card">
                <h3>ğŸ“ Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</h3>
                <p style="font-size: 0.8rem; margin-bottom: 10px; color: #ccc;">ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ø±Ø´ÙØ© Ù…Ù„ÙØ§Øª PDF Ø£Ùˆ Ø§Ù„ØµÙˆØ± Ù„Ø·Ø¨Ø§Ø¹ØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹.</p>
                <input type="text" id="fDesc" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Ø§Ù„Ù…Ø³ØªÙ†Ø¯">
                <input type="file" id="fDoc" accept=".pdf,.png,.jpg,.jpeg,.doc,.docx,.xls,.xlsx">
                <button onclick="saveFile()" class="btn btn-main" style="background:var(--happy-blue);">Ø£Ø±Ø´ÙØ© ÙˆØ­ÙØ¸ Ø§Ù„Ù…Ù„Ù ğŸ“‚</button>
                <div class="table-container" style="margin-top:15px; min-width: auto;">
                    <table style="min-width: 100%;">
                        <thead><tr><th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø§Ø±Ø´Ù</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</th></tr></thead>
                        <tbody id="fBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="card">
            <h3 style="color:var(--happy-pink)">ğŸ“° Ø³Ø¬Ù„ Ø§Ù„Ø£Ø®Ø¨Ø§Ø± Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©</h3>
            <div class="table-container"><table><thead><tr><th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead><tbody id="nBody"></tbody></table></div>
        </div>

        <button onclick="showSection('home')" class="btn btn-del" style="width: 150px;">Ø®Ø±ÙˆØ¬ Ø¢Ù…Ù†</button>
    </section>

    <section id="news-public" class="section">
        <h2 style="text-align: center; color: var(--happy-pink); margin-bottom: 30px;">ğŸ“° Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h2>
        <div id="newsGrid" class="form-grid"></div>
    </section>

    <script>
        let members = JSON.parse(localStorage.getItem('slma_v10_m')) || [];
        let news = JSON.parse(localStorage.getItem('slma_v10_n')) || [];
        let files = JSON.parse(localStorage.getItem('slma_v10_f')) || [];
        
        let logoRight = localStorage.getItem('slma_logo_right') || '666.jpg';
        let logoLeft = localStorage.getItem('slma_logo_left') || '666.jpg';

        const motionAddress = {
            main: "Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: Ø§Ù„Ø³ÙˆØ¯Ø§Ù† - Ø§Ù„Ø®Ø±Ø·ÙˆÙ…",
            branch: "Ù…ÙƒØªØ¨ ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù‚Ø¶Ø§Ø±Ù",
            phone: "Ø§Ù„Ù‡Ø§ØªÙ: 0123456789",
            email: "Email: info@slma.org",
            enName: "Sudan Liberation Movement/Army"
        };

        window.onload = function() { updateLogoPreviews(); };

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨ØªÙ†Ø³ÙŠÙ‚ Ø¬Ù…ÙŠÙ„
        function getCurrentFullDate() {
            const now = new Date();
            return now.toLocaleDateString('ar-EG') + ' | ' + now.toLocaleTimeString('ar-EG');
        }

        function searchMember() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            if (!query) { notify("Ø¨Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ù„Ù„Ø¨Ø­Ø«", "e"); return; }
            const result = members.find(m => m.name.toLowerCase().includes(query));
            if (result) {
                const content = `<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; line-height: 1.8;"><p><strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${result.name}</p><p><strong>Ø§Ù„Ø¬Ù†Ø³:</strong> ${result.gender}</p><p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${result.phone}</p><p><strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${result.age} Ø³Ù†Ø©</p><p><strong>Ù…ÙƒØ§Ù† Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:</strong> ${result.bPlace}</p><p><strong>Ø§Ù„Ø³ÙƒÙ†:</strong> ${result.address}</p><p><strong>Ø§Ù„ØªØ¹Ù„ÙŠÙ…:</strong> ${result.edu} (${result.major})</p><p><strong>Ø§Ù„ÙˆØ¸ÙŠÙØ©:</strong> ${result.job}</p><p><strong>Ø§Ù„Ù‡ÙˆÙŠØ©:</strong> ${result.idType} - ${result.idNum}</p><p><strong>Ø§Ù„ØµÙØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©:</strong> <span style="color:var(--happy-neon)">${result.role}</span></p><p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:</strong> ${result.join}</p></div>`;
                document.getElementById('searchContent').innerHTML = content;
                document.getElementById('searchModal').style.display = 'flex';
            } else { notify("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù…", "e"); }
        }

        function closeSearch() { document.getElementById('searchModal').style.display = 'none'; }

        function uploadLogo(side) {
            const input = document.getElementById(side === 'right' ? 'logoRightInput' : 'logoLeftInput');
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64 = e.target.result;
                    if (side === 'right') { logoRight = base64; localStorage.setItem('slma_logo_right', base64); }
                    else { logoLeft = base64; localStorage.setItem('slma_logo_left', base64); }
                    updateLogoPreviews();
                    notify("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø¹Ø§Ø±", 's');
                };
                reader.readAsDataURL(file);
            }
        }

        function updateLogoPreviews() {
            const pr = document.getElementById('previewRight');
            const pl = document.getElementById('previewLeft');
            if(pr) pr.innerHTML = `<img src="${logoRight}" class="logo-preview">`;
            if(pl) pl.innerHTML = `<img src="${logoLeft}" class="logo-preview">`;
            const homeImg = document.getElementById('homeLogo');
            if(homeImg) homeImg.src = logoRight;
        }

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'news-public') renderPublicNews();
        }

        function notify(msg, mode) {
            const t = document.getElementById('toast');
            t.innerText = msg; t.style.display = 'block';
            if(mode === 's') { t.style.background = 'var(--success-glow)'; t.style.color = '#000'; }
            else if(mode === 'e') { t.style.background = 'var(--error-glow)'; t.style.color = '#fff'; }
            setTimeout(() => t.style.display = 'none', 3000);
        }

        function login() {
            if(document.getElementById('admUser').value === 'semsemwolf' && document.getElementById('admPass').value === 'Wolfgo123@') {
                showSection('admin-panel'); renderAdminTables();
            } else { notify("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª", 'e'); }
        }

        document.getElementById('mForm').onsubmit = function(e) {
            e.preventDefault();
            const idx = document.getElementById('editIdx').value;
            const data = {
                name: document.getElementById('mName').value, gender: document.getElementById('mGender').value,
                phone: document.getElementById('mPhone').value, bDate: document.getElementById('mBDate').value,
                age: document.getElementById('mAge').value, bPlace: document.getElementById('mBPlace').value,
                address: document.getElementById('mAddress').value, edu: document.getElementById('mEdu').value,
                major: document.getElementById('mMajor').value, job: document.getElementById('mJob').value,
                jobLoc: document.getElementById('mJobLoc').value, idType: document.getElementById('mIdType').value,
                idNum: document.getElementById('mIdNum').value, join: document.getElementById('mJoin').value,
                role: document.getElementById('mRole').value, prev: document.getElementById('mPrev').value,
                know: document.getElementById('mKnow').value
            };
            if(idx == -1) members.push(data); else members[idx] = data;
            localStorage.setItem('slma_v10_m', JSON.stringify(members));
            this.reset(); document.getElementById('editIdx').value = -1;
            notify("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­", 's');
            renderAdminTables();
        };

        function renderAdminTables() {
            document.getElementById('mBody').innerHTML = members.map((m, i) => `<tr><td>${m.name}</td><td>${m.idNum}</td><td>${m.role}</td><td>${m.address}</td><td><button class="btn btn-view" onclick="printPreviewM(${i})">Ø¨Ø·Ø§Ù‚Ø© ÙØ±Ø¯ÙŠØ©</button><button class="btn btn-edit" onclick="editM(${i})">ØªØ¹Ø¯ÙŠÙ„</button><button class="btn btn-del" onclick="del('m',${i})">Ø­Ø°Ù</button></td></tr>`).join('');
            document.getElementById('nBody').innerHTML = news.map((n, i) => `<tr><td>${n.title}</td><td>${n.date}</td><td><button class="btn btn-edit" onclick="editNews(${i})">ØªØ¹Ø¯ÙŠÙ„</button><button class="btn btn-del" onclick="del('n',${i})">Ø­Ø°Ù</button></td></tr>`).join('');
            document.getElementById('fBody').innerHTML = files.map((f, i) => `<tr><td>${f.name}</td><td><button class="btn btn-view" onclick="previewFile(${i})">ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© ÙˆØ·Ø¨Ø§Ø¹Ø©</button><button class="btn btn-del" onclick="del('f',${i})">Ø­Ø°Ù</button></td></tr>`).join('');
        }

        function del(t, i) { 
            if(confirm("Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠØŸ")) { 
                if(t==='m') members.splice(i,1); 
                else if(t==='n') news.splice(i,1);
                else if(t==='f') files.splice(i,1);
                localStorage.setItem('slma_v10_'+t, JSON.stringify(t==='m'?members:t==='n'?news:files)); 
                renderAdminTables(); 
            } 
        }
        
        function editM(i) { 
            const m = members[i];
            document.getElementById('mName').value = m.name;
            document.getElementById('mPhone').value = m.phone;
            document.getElementById('editIdx').value = i; 
            showSection('reg-page'); 
        }

        function saveNews() {
            const idx = document.getElementById('newsIdx').value;
            const title = document.getElementById('nTitle').value;
            const content = document.getElementById('nContent').value;
            const imgInput = document.getElementById('nImg');
            
            if(!title || !content) { notify("Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¨Ø±", 'e'); return; }

            const saveProcess = (imgData) => {
                const newsObj = { 
                    title, 
                    content, 
                    img: imgData || '666.jpg', 
                    date: getCurrentFullDate() // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ù„Ù„Ø®Ø¨Ø± Ø§Ù„Ù…Ø±ÙÙˆØ¹
                };
                if(idx == -1) news.push(newsObj); else news[idx] = newsObj;
                localStorage.setItem('slma_v10_n', JSON.stringify(news));
                notify("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø®Ø¨Ø± Ø¨Ù†Ø¬Ø§Ø­", 's');
                resetNewsForm();
                renderAdminTables();
            };

            if(imgInput.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => saveProcess(e.target.result);
                reader.readAsDataURL(imgInput.files[0]);
            } else {
                saveProcess(idx != -1 ? news[idx].img : null);
            }
        }

        function editNews(i) {
            const n = news[i];
            document.getElementById('nTitle').value = n.title;
            document.getElementById('nContent').value = n.content;
            document.getElementById('newsIdx').value = i;
            document.getElementById('newsBtn').innerText = "ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø¨Ø± ğŸ”„";
            window.scrollTo(0, document.getElementById('newsIdx').offsetTop);
        }

        function resetNewsForm() {
            document.getElementById('nTitle').value = '';
            document.getElementById('nContent').value = '';
            document.getElementById('nImg').value = '';
            document.getElementById('newsIdx').value = -1;
            document.getElementById('newsBtn').innerText = "Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø± Ø§Ù„Ø¢Ù† ğŸš€";
        }

        function saveFile() {
            const name = document.getElementById('fDesc').value;
            const fileInput = document.getElementById('fDoc');
            if(!name || !fileInput.files[0]) { notify("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù ÙˆØ§Ø®ØªØ± Ù…Ù„ÙØ§Ù‹", 'e'); return; }

            const reader = new FileReader();
            reader.onload = function(e) {
                files.push({ name: name, data: e.target.result, type: fileInput.files[0].type });
                localStorage.setItem('slma_v10_f', JSON.stringify(files));
                notify("ØªÙ… Ø£Ø±Ø´ÙØ© Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­", 's');
                document.getElementById('fDesc').value = '';
                document.getElementById('fDoc').value = '';
                renderAdminTables();
            };
            reader.readAsDataURL(fileInput.files[0]);
        }

        function previewFile(i) {
            const f = files[i];
            const pWin = window.open('', '_blank');
            let content = `
                <html dir="rtl">
                <head>
                    <title>Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ø³ØªÙ†Ø¯: ${f.name}</title>
                    <style>
                        body { font-family: 'Cairo', sans-serif; background: #f0f0f0; margin: 0; display: flex; flex-direction: column; align-items: center; }
                        .toolbar { background: #333; color: white; width: 100%; padding: 10px; display: flex; justify-content: center; gap: 20px; position: sticky; top:0; }
                        .btn-print { background: #00ffcc; color: #000; border: none; padding: 10px 30px; border-radius: 5px; cursor: pointer; font-weight: bold; }
                        .doc-container { background: white; margin: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.2); max-width: 90%; padding: 10px; }
                        img { max-width: 100%; height: auto; }
                        @media print { .toolbar { display: none; } .doc-container { box-shadow: none; margin: 0; max-width: 100%; } }
                    </style>
                </head>
                <body>
                    <div class="toolbar">
                        <span style="margin-top:5px;">Ù…Ø³ØªÙ†Ø¯: ${f.name}</span>
                        <button class="btn-print" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ø¢Ù†</button>
                    </div>
                    <div class="doc-container">
            `;
            if(f.type.includes('image')) { content += `<img src="${f.data}">`; } 
            else if(f.type.includes('pdf')) { content += `<embed width="1000px" height="800px" src="${f.data}" type="application/pdf">`; } 
            else { content += `<h3>Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©.</h3>`; }
            content += `</div></body></html>`;
            pWin.document.write(content);
            pWin.document.close();
        }

        function renderPublicNews() {
            document.getElementById('newsGrid').innerHTML = news.map(n => `<div class="card"><img src="${n.img}" style="width:100%;border-radius:20px;border:3px solid var(--happy-pink);"><h3 style="color:var(--happy-yellow);margin-top:15px;">${n.title}</h3><p style="font-size:0.75rem; color:var(--happy-neon)">ğŸ“… ${n.date}</p><p style="opacity:0.9;">${n.content}</p></div>`).join('');
        }

        function printAllMembers() {
            if(members.length === 0) { notify("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©", 'e'); return; }
            const pWin = window.open('', '', 'width=1200,height=800');
            let tableRows = members.map((m, i) => `<tr><td>${i+1}</td><td>${m.name}</td><td>${m.gender}</td><td>${m.phone}</td><td>${m.bDate}</td><td>${m.age}</td><td>${m.address}</td><td>${m.edu}</td><td>${m.job}</td><td>${m.idType}</td><td>${m.idNum}</td><td>${m.join}</td><td style="font-weight:bold;">${m.role}</td></tr>`).join('');
            pWin.document.write(`
                <html dir="rtl">
                <head>
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
                        body { font-family: 'Cairo', sans-serif; padding: 10px; } 
                        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #000; padding-bottom: 10px; margin-bottom: 15px; } 
                        .header img { width: 70px; } 
                        .header-info { text-align: center; flex-grow: 1; }
                        .header-info h2 { margin: 0; font-size: 20px; color: #000; }
                        .header-info .en-title { font-size: 14px; font-weight: bold; margin-bottom: 5px; font-family: 'Segoe UI', Arial; }
                        .header-info p { margin: 2px 0; font-size: 11px; font-weight: bold; }
                        .print-timestamp { text-align: left; font-size: 10px; margin-bottom: 5px; font-weight: bold; }
                        table { width: 100%; border-collapse: collapse; font-size: 10px; } 
                        th, td { border: 1px solid #000; padding: 4px; text-align: center; } 
                        th { background: #f2f2f2; } 
                        .signature-section { margin-top: 30px; display: flex; justify-content: space-around; font-weight: bold; font-size: 12px; }
                        .sig-box { text-align: center; width: 200px; }
                        .sig-line { margin-top: 40px; border-top: 1px dashed #000; padding-top: 5px; }
                        @media print { .no-print { display: none; } @page { size: A4 landscape; margin: 5mm; } }
                    </style>
                </head>
                <body>
                    <div class="no-print"><button onclick="window.print()" style="padding:10px 40px; cursor:pointer;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¢Ù† ğŸ–¨ï¸</button></div>
                    <div class="header">
                        <img src="${logoRight}">
                        <div class="header-info">
                            <h2>Ø­Ø±ÙƒØ© / Ø¬ÙŠØ´ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</h2>
                            <div class="en-title">${motionAddress.enName}</div>
                            <p style="color:red; font-size:16px;">ÙƒØ´Ù Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø§Ù„Ø¹Ø§Ù… - ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù‚Ø¶Ø§Ø±Ù</p>
                            <p>${motionAddress.main} | ${motionAddress.branch}</p>
                        </div>
                        <img src="${logoLeft}">
                    </div>
                    <div class="print-timestamp">ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ØªÙ‚Ø±ÙŠØ±: ${getCurrentFullDate()}</div>
                    <table>
                        <thead>
                            <tr><th>#</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø¬Ù†Ø³</th><th>Ø§Ù„Ù‡Ø§ØªÙ</th><th>Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th><th>Ø§Ù„Ø¹Ù…Ø±</th><th>Ø§Ù„Ø³ÙƒÙ†</th><th>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</th><th>Ø§Ù„Ù…Ù‡Ù†Ø©</th><th>Ø§Ù„Ù‡ÙˆÙŠØ©</th><th>Ø±Ù‚Ù…Ù‡Ø§</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„ØµÙØ©</th></tr>
                        </thead>
                        <tbody>${tableRows}</tbody>
                    </table>
                    <div class="signature-section">
                        <div class="sig-box">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©<div class="sig-line">Ø§Ù„Ø®ØªÙ… ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®</div></div>
                        <div class="sig-box">ØªÙˆÙ‚ÙŠØ¹ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø­Ø±ÙƒØ©<div class="sig-line">Ø§Ù„Ø®ØªÙ… ÙˆØ§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯</div></div>
                    </div>
                </body>
                </html>`);
        }

        function printPreviewM(i) {
            const m = members[i];
            const pWin = window.open('', '', 'width=900,height=800');
            pWin.document.write(`
                <html dir="rtl">
                <head>
                    <style>
                        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
                        body { font-family: 'Cairo', sans-serif; padding: 20px; } 
                        .border-box { border: 5px double #000; padding: 20px; position: relative; } 
                        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #000; margin-bottom: 20px; padding-bottom: 10px; } 
                        .header img { width: 80px; } 
                        .header-info { text-align: center; }
                        .header-info h2 { margin: 0; font-size: 22px; }
                        .header-info .en-title { font-size: 14px; font-weight: bold; margin: 2px 0; font-family: 'Segoe UI', Arial; }
                        .print-timestamp { font-size: 11px; text-align: left; font-weight: bold; margin-bottom: 10px; }
                        table { width: 100%; border-collapse: collapse; } 
                        td { padding: 12px; border: 1px solid #ccc; } 
                        .label { background: #f0f0f0; font-weight: bold; width: 30%; }
                        .signature-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; margin-top: 40px; font-weight: bold; }
                        .sig-field { border-top: 1px solid #000; margin-top: 40px; padding-top: 5px; text-align: center; }
                        @media print { .no-print { display: none; } }
                    </style>
                </head>
                <body>
                    <div class="border-box">
                        <div class="header">
                            <img src="${logoRight}">
                            <div class="header-info">
                                <h2>Ø­Ø±ÙƒØ© / Ø¬ÙŠØ´ ØªØ­Ø±ÙŠØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</h2>
                                <div class="en-title">${motionAddress.enName}</div>
                                <h3 style="margin:5px 0;">Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø¹Ø¶ÙˆÙŠØ© ÙØ±Ø¯ÙŠØ©</h3>
                            </div>
                            <img src="${logoLeft}">
                        </div>
                        <div class="print-timestamp">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ${getCurrentFullDate()}</div>
                        <table>
                            <tr><td class="label">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ</td><td>${m.name}</td></tr>
                            <tr><td class="label">Ø§Ù„ØµÙØ© Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©</td><td style="font-weight:bold; color:blue;">${m.role}</td></tr>
                            <tr><td class="label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</td><td>${m.phone}</td></tr>
                            <tr><td class="label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ / Ø§Ù„Ø¹Ù…Ø±</td><td>${m.bDate} (${m.age} Ø³Ù†Ø©)</td></tr>
                            <tr><td class="label">Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</td><td>${m.address}</td></tr>
                            <tr><td class="label">Ù†ÙˆØ¹ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</td><td>${m.idType} - ${m.idNum}</td></tr>
                            <tr><td class="label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</td><td>${m.join}</td></tr>
                        </table>
                        <div class="signature-grid">
                            <div>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ø¶Ùˆ:<div class="sig-field"></div></div>
                            <div>ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®ØªØµØ©:<div class="sig-field"></div></div>
                        </div>
                        <div style="text-align:center; margin-top:20px;" class="no-print">
                            <button onclick="window.print()" style="padding:10px 30px; cursor:pointer; font-weight:bold;">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© ğŸ–¨ï¸</button>
                        </div>
                    </div>
                </body>
                </html>`);
        }
    </script>
</body>
</html>
